## Docker with CRON 

---

Данная реализация позволяет планировать повторяющиеся задания не используя системный планировщик хостинга. Может управлять экземпляром докера хостовой ОС, в том числе выполнять команды на других контейнерах. Основан на [проекте](https://github.com/clockworksoul/docker-gc-cron).

### Запуск сервиса
1. Переименовываем **template.crontab** в **crontab**
2. Переименовываем **template.env** в **.env**
3. Редактируем файлы `./scripts/protected_*.sh`
4. Можно запускать

### Порядок использования
1. Пишем нужный скрипт (короткие команды можно сразу вписать в **crontab**)
2. Размещаем его в папке **./scripts**
3. Указываем, при необходимости, переменные окружения в файле **.env**
4. Вписываем задание в **crontab**
5. Перезапускаем сервис

### Примечание
- По умолчанию выводит сводку использования диска докер объектами.
- В комплект входят скрипты для удаления неиспользуемых контейнеров, томов и образов.
- Внутри контейнера время определяется по UTC, планируйте задания с учётом своего часового пояса или определите переменную окружения TZ.
- Файл **./.bashrc** добавлен для комфортной работы внутри контейнера. Войти в работающий контейнер: `docker exec -it cron bash`.

### Лит-ра
1. https://habr.com/ru/post/47163/  
2. https://linuxize.com/post/bash-if-else-statement/
3. https://download.docker.com/linux/static  
4. https://habr.com/ru/company/badoo/blog/468061/  
5. http://rus-linux.net/MyLDP/admin/Alternatives-Cron-For-Linux.html  
6. https://dshearer.github.io/jobber/doc/v1.4/  
